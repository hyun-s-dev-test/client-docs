---
title: StoryBook
date: "2022-03-03"
description: 스토리북은 UI 개발 환경이자 UI 컴포넌트를 위한 놀이터입니다. 개발자들이 컴포넌트를 독립적으로 만들고, 격리된 개발 환경에서 상호작용이 가능한 컴포넌트를 선보일 수 있도록 해줍니다
---

위에서 잘 만든 공통 컴포넌트를 공유하고, 사용할 때 Storybook은 다시 한번 빛을 발한다. 어디선가 누군가 ‘가장 좋은 소스는 주석이 필요 없는 소스’라고는 하지만, 그 컴포넌트에 어떤 프로퍼티들이 있는지, 어떤 프로퍼티에 어떤 값을 입력할 수 있는지, 어떤 값을 입력했을 때 어떻게 변하고 동작하는지를 온전히 소스만 보며 익히는 것은 쉬운 일이 아니다. 이럴 때 유즈케이스별로 잘 분류된 연습장, 그러니까 용례들이 소스와 함께 제공된다면 함께 개발하는 입장에서는 도움이 많이 될 수 있다.

## 주객전도...

스토리북은 UI 컴포넌트를 독립적으로 로컬에서 코드를 보지 않고 해당 컴포넌트가 어떻게 사용되는지 알 수 있는 UI컴포넌트 개발 지원 어플인 것 같다. 이렇게 UI를 규격화 혹은 표준화 해놓으면 같은 프로젝트 안에서는 물론 다른 프로젝트의 UI 작업할 때도 재사용성 측면에서 많은 이점이 있을 것 같다.

처음 개발환경을 세팅할 때 emotion 과 storybook을 같이 사용하려고 준비하는 시간이 너무 길었다. CRA로 리액트 환경을 구성하면 @jsx라는 주석파일을 써야한다. 하지만 검색하다 보니 craco로 cra를 커스터마이징 할 수 있다길래 이 작업을 하려다가 시간만 버리고 작업을 완수하지도 못했다. 아쉽다. ㅜㅜ 좀더 차분하게 해볼걸.

이번에는 스토리북으로 UI단계서부터 렌더링될 페이지를 구상하면서 작업한 게 아니라 코드를 쭉 짜고 어떯게 돌아가는지 보려주려는 의도로 스토리북을 작성했다. 스토리북을 어떻게 사용해야 유용한지 감을 잘 못잡아서 그랬었는데 기한이 다가와서야 왜 스토리북을 쓰는지 어떻게 써야하는지 감이 슬슬 오는 것 같다. 프로젝트 기획단계에서 구체적인 계획을 짜야 거기서 파생된 UI나 이벤트가 나오고 그걸 고려하면서 UI 작업을 할 때 스토리북이 진정으로 유용하게 기능할 것 같다.

### 이슈

StoryBook은 각각의 파일단위로 컴파일?을 하기 때문에 전역으로 설정된 컴포넌트에서 에러가 발생했다. 예를 들어 리액트로 작업할 때 Link는 Routes로 감싸줘야 하는데 스토리북으로 작업한 독립적인 컴포넌트는 Link만 있고 Routes는 외부 컴포넌트에 있기 때문에 에러가 났다.
Redux Store의 경우에도 전역으로 설정되어있다 보니 selector로 데이터를 가져오거나 dispatch로 액션을 보내는 컴포넌트를 스토리북으로 만드니 에러가 발생했다.
storybook의 환경설정 파일이나 preview.파일을 수정해 문제를 해결했다.

### 아쉬운 점

storybook을 수박 겉핥기 식으로만 찍먹한 느낌이다.
튜토리얼이 자세하게 잘 되어있는데 이번엔 시간이 없어서 앞 부분만 하다 말았다. 이거 꼭 완주해서 storybook 기능을 좀 더 깊게 알고 싶다. 끝.

> RTK의 createAsyncThunk를 사용하면 reduxDevTools로 디버깅하기엔 확실히 편할 것 같다. 하지만 >전 프로젝트에서 사용했던 recoil과 비교해보면 RTK는 여전히 무겁고 어렵고 손이 많이 가는 것 같다. >recoil은 loadable 객체로 데이터 캐싱과 promise resolve 상태까지 한번에 관리가 가능했어서 >recoil이 안정성만 보장이 된다면 recoil을 깊게 배우는 것도 괜찮을 것 같다.
